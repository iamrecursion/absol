%DocumentClass
\documentclass[a4paper,11pt]{report}

%Additional Packages
\usepackage{scrextend} %for variable indentation
\usepackage{algorithm} %For algorithms
\usepackage{algpseudocode} %For algorithms
\usepackage[]{array}
\usepackage{amsmath} %Extra formula-writing functionality
\usepackage{amssymb} %More formula-writing functionality
\usepackage[toc]{appendix}
\usepackage{bm}
\usepackage{bold-extra} %Small caps
\usepackage{caption}
\usepackage{color} %Colour stuff (mostly for the highlight custom command)
\usepackage{enumerate} %For lists
\usepackage{fancyhdr}
\usepackage{float} %better float control
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc} %for font encoding
\usepackage{framed} %For frames around blocks
\usepackage[top=3cm, bottom=3cm, left=3.5cm, right=3cm]{geometry} %Fix page margins
\usepackage[hidelinks]{hyperref} %For URL formleatting (makes clickable links)
\usepackage[toc, xindy, acronym, nonumberlist, nopostdot]{glossaries}
\usepackage{graphicx} %For including images, etc.
\usepackage{listings} %For including code
\usepackage{longtable} %for multi-page tables
\usepackage{mathrsfs} %For maths script fonts
\usepackage{newclude}
\usepackage{titling}
\usepackage{titlesec}
\usepackage[nottoc]{tocbibind}
\usepackage[]{natbib} %For the bibliography
%\usepackage[superscript]{cite}
\usepackage{pdfpages} %For including PDFs
\usepackage[]{pdflscape}
\usepackage{stmaryrd}
\usepackage{subcaption}
\usepackage{tabu} %more pretty tables
\usepackage{tabulary} %for nice tables
\usepackage{tabularx} %also for nice tables
\usepackage{ulem}
\usepackage{xcolor}
\usepackage{xparse}
\usepackage{xstring}
\usepackage{textcomp}
\usepackage[prefix=sol-]{xcolor-solarized}
\usepackage[]{marvosym}
\usepackage{microtype}
\usepackage{lmodern}

\usepackage{relsize}

%CustomCommands
\newcommand{\highlight}[1]{\colorbox{yellow}{#1}} %Highlights text
\newcommand{\limplies}{\to} %Creates the logical implication sign
\newcommand{\liff}{\leftrightarrow} %Creates the double logical implication sign
\newcommand{\leftabs}{\left\lvert} %Left absolute value bracket
\newcommand{\rightabs}{\right\rvert} %Right absolute value bracket
\newcommand{\textbsc}[1]{\textsc{\textbf{#1}}}
%\renewcommand\thesubsection{(\alph{subsection})} %Make subsections alphabetical
\newcommand{\id}{\hspace*{12pt}}
\newcommand{\newpar}{\vspace{12pt}}
\newcommand{\lam}{$\lambda$}
\newcommand{\alp}{$\alpha$}
\newcommand{\bet}{$\beta$}
\newcommand{\aequiv}{=_\alpha}
\newcommand{\bequiv}{=_\beta}
\newcommand{\bconv}{\limplies_\beta}
\newcommand{\context}{$\Gamma$}
\newcommand{\rspace}{\;\;\;\;\;\;\;\;}
\newcommand{\eval}{\Downarrow}
\newcommand{\goesto}[0]{\MVRightarrow}
\newcommand{\mathgoesto}[0]{\mathord{\text{ \goesto\;}}}

\newcounter{requirementcounter}
\newcommand*{\reqlabel}[1]{R\refstepcounter{requirementcounter}\therequirementcounter\label{#1}}
\newcommand*{\reqref}[1]{R\ref{#1}}

\newcommand*{\mklabelcase}[1]{\lowercase{\StrSubstitute[0]{#1}{ }{\_}}}

\newcommand{\requirement}[3]{
    \StrSubstitute[0]{#1}{ }{}[\labelname]
    \textbf{Requirement \reqlabel{req:\labelname}}
    \begin{addmargin}[1em]{0em}
        \textbf{Name:} #1\\ 
        \textbf{Type:} #2\\
        \textbf{Description:}\\
        #3\\
    \end{addmargin}
}

% New Table Column Types
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

% Syntax: \newdualentry[glossary options][acronym options]{label}{abbrv}{long}{description}
\DeclareDocumentCommand{\newdualentry}{ O{} O{} m m m m } {
    \newglossaryentry{gls-#3}{name={#5},text={#5\glsadd{#3}},
        description={#6},#1
    }
    % \makeglossaries
    \newacronym[first=#5, firstplural=#5s, see={[Glossary:]{gls-#3}},#2]{#3}{#4}{#5 \glsseeformat[Glossary:]{gls-#3}{#5}\glsadd{gls-#3}}
    % \newacronym[see={[Glossary:]{gls-#3}},#2]{#3}{#4}{#5\glsadd{gls-#3}}
}

% For quoting \quoteit{quote}{attribution}
\newcommand{\quoteit}[2]{
    \begin{longtable}{p{14cm}}
        \textit{``#1''} \\
        % \hspace{5mm} --- #2 
        \begin{tabular}{R{14cm}}
            --- #2
        \end{tabular}
    \end{longtable}
}

% For definitions \defblock{colsize}{name}{description}
\newcommand{\defblock}[3]{
    \begin{longtable}{l p{#1}} 
        \textbf{#2} & #3
    \end{longtable}
}

\input{resources/bath_dissertation_definitions.tex}

%Various Definitions
\setcounter{tocdepth}{2}
\definecolor{light-gray}{gray}{0.5}

\titleformat{\chapter}
    {\normalfont\huge}  % format
    {\thechapter.}      % label
    {10pt}              % separation
    {\huge\it}          % before-code

% \pagestyle{fancy}
% \lhead{\color{light-gray}Ara Adkins}
% \rhead{\color{light-gray}ABSOL}
% \cfoot{\thepage}
% \renewcommand{\headrulewidth}{0pt}
% \renewcommand{\footrulewidth}{0pt}

\setlength{\parindent}{0pt}
\setlength{\headheight}{14pt}

\hypersetup{
    colorlinks,
    linkcolor={blue!30!black},
    citecolor={blue!30!black},
    urlcolor={blue!80!black}
}

\makeatletter
\renewcommand\@dotsep{200}
\makeatother

\renewcommand{\labelenumii}{\theenumii}
\renewcommand{\theenumii}{\theenumi.\arabic{enumii}.}

% Listings Styles
\lstset{
    % How/what to match
    sensitive=true,
    % Border (above and below)
    frame=lines,
    % Extra margin on line (align with paragraph)
    xleftmargin=0.5cm,
    % Put extra space under caption
    belowcaptionskip=1\baselineskip,
    % Colors
    backgroundcolor=\color{sol-base3},
    basicstyle=\color{sol-base0}\footnotesize\ttfamily,
    keywordstyle=\color{sol-cyan},
    commentstyle=\color{sol-base01},
    stringstyle=\color{sol-blue},
    numberstyle=\color{sol-violet},
    identifierstyle=\color{sol-base00},
    % Break long lines into multiple lines?
    breaklines=true,
    % Show a character for spaces?
    showstringspaces=false,
    tabsize=4,
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny\color{sol-base1},
    rulecolor=\color{sol-base01},
    aboveskip=2em,
    belowskip=2em,
    upquote=true,
    basewidth={0.5em,0.5em}
}

% Title
% \pretitle{
% 	\begin{center}
% }
% \posttitle{
%     \end{center}
% }

\newcommand{\titletext}{ABSOL: Specification and Formal Verification of Domain-Specific Languages through Automatic Compiler Generation in Haskell}

\title{\titletext}
\author{Ara Adkins}
\date{Bachelor of Science, Computer Science with Honours\\The University of Bath\\\today}

% Glossaries
\makeglossaries
\include{resources/glossary}
\glsaddall % add all items to the glossaries

%Document
\begin{document}

% Title
\maketitle
\newpage

% Dissertation Consultation Prohibition
\consultation{100}
\newpage

% Declaration
\declaration{\titletext}{Ara Adkins}
\newpage

% Abtract Text
\input{resources/abstract.tex}

% Contents
\tableofcontents

\listoffigures

\listoftables

\listofalgorithms
\addcontentsline{toc}{chapter}{List of algorithms}

\printglossaries

% Acknowledgements
\include{resources/acknowledgements}

% Chapters
\include{resources/introduction}
\include{resources/literature_survey}
\include{resources/elucidation_requirements}
\include{resources/architecture_and_algorithms}
\include{resources/implementation}
\include{resources/testing}
\include{resources/evaluation}
\include{resources/conclusion}

% Bibliography
\bibliographystyle{abbrvnat}
\bibliography{resources/bibliography}

\begin{appendix}

\include{resources/software_readme}
\include{resources/metaspec_grammar}

\end{appendix}

\end{document}
